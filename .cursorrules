# === PROJECT IDENTITY ===
Project: Posture AI Kor
Type: Web-based Pose Estimation & Physiotherapy Analysis
Core Stack: JavaScript (ES Modules), Tensorflow.js, MediaPipe, BlazePose
Author tone: Casual Korean, direct, practical, minimal bullshit

# === IMPORTANT ABSOLUTE RULES ===
1. â— ì ˆëŒ€ ì´ í”„ë¡œì íŠ¸ì—ì„œ `sessions is undefined` ìƒíƒœë¥¼ ë§Œë“¤ì§€ ë§ ê²ƒ
2. â— initializeApp()ì€ 1ë²ˆë§Œ í˜¸ì¶œë˜ì–´ì•¼ í•˜ë©° ë¬´í•œ ë£¨í”„ë¥¼ ê¸ˆì§€í•œë‹¤
3. â— DOMContentLoaded ì´ë²¤íŠ¸ ì¤‘ë³µ ë“±ë¡ ê¸ˆì§€
4. â— <script> íƒœê·¸ ë¯¸ì™„ì„±(`Unexpected end of input`) ë°œìƒ ê¸ˆì§€
5. â— ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ë³´ë‹¤ ë‚´ë¶€ ëª¨ë“ˆì´ ë¨¼ì € ì‹¤í–‰ë˜ì–´ì•¼ í•¨
6. â— ëª¨ë¸ ë¡œë”©(loadModels) ì´ì „ì— ë¶„ì„(analyze)ì„ ì‹¤í–‰ ê¸ˆì§€
7. â— ë¸Œë¼ìš°ì € ì½˜ì†”ì— warning/error 0ê°œê°€ ë˜ë„ë¡ ìœ ì§€
8. â— ëª¨ë“  JSëŠ” ES Module ë°©ì‹( import/export )ìœ¼ë¡œ ê´€ë¦¬
9. â— "ê·¸ëƒ¥ í•´ë³´ì„¸ìš”" ê°™ì€ ì„¤ëª… ê¸ˆì§€. ì½”ë“œ or í•´ê²°ì±…ë§Œ ì œì‹œ
10. â— ë³€ê²½ ì‹œ í•­ìƒ 'ì˜í–¥ ë²”ìœ„ ë¶„ì„ â†’ ë¦¬íŒ©í† ë§ â†’ í…ŒìŠ¤íŠ¸' ìˆœìœ¼ë¡œ ì‹¤í–‰

# === CONSOLE MUST BE CLEAN ===
ğŸš« Allowed in final state:
- Uncaught exceptions
- Red console errors
- Repeated warnings
- Infinite loops
- Model not loaded before execution
- Undefined access
- Duplicate event listeners

âœ… Required final log shape:
initializeApp ì‹¤í–‰ë¨
sessions ì´ˆê¸°í™”ë¨
ëª¨ë¸(front/side) ë¡œë“œ ì™„ë£Œ
ë¶„ì„ ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ
(ì´ì™¸ì˜ ë°˜ë³µ ì—†ëŠ” êµ¬ì¡°)

# === CODE ARCHITECTURE POLICY ===
Directory must follow:
src/
 â”œâ”€ core/ (session, init, utils)
 â”œâ”€ ai/   (modelLoader, analyzer)
 â””â”€ index.js (entry)

HTML must not manually call initialize functions.
Execution entry must always be:
<script type="module" src="./src/index.js"></script>

# === SAFETY CODE PATTERNS ===
âœ” sessions must always initialize as:
export const sessions = {};

âœ” initializeApp structure must always include:
- idempotent safeguard (run only once)
- model loading before analysis
- retry protection must have a max cap
- no recursive self-trigger without exit condition

âœ” Detector loading must use ESM CDN imports where possible

# === TEST BEFORE SUBMIT ===
Before providing final code or completing task, you MUST:
1. Simulate execution flow mentally
2. Verify initialization order
3. Ensure no undefined access
4. Confirm no repeating event listeners
5. Confirm exit conditions exist for retries
6. Confirm zero console errors

# === REFACTORING GUIDELINES ===
- Split files logically, avoid 500+ line single files
- Avoid nested callback hell â†’ prefer async/await
- No silent fails â†’ log with meaning
- No magic globals except controlled ones (sessions)

# === RESPONSE STYLE RULE ===
- Reply in Korean casual tone
- No unnecessary CS theory essays
- Show final code first
- Explain only if necessary
- Be concise, savage if needed, practical always

# === QUALITY GATE ===
âœ… Merge / Approve only if:
- ì‹¤í–‰ ì¦‰ì‹œ stabilize
- error 0
- warning 0
- loop 0
- undefined 0
- ë¶„ì„ íƒ€ì´ë° ì •í™•

